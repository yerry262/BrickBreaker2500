<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="BrickBreaker2500 - A fun brick breaker game where you launch balls to destroy bricks!">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BrickBreaker2500">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <title>BrickBreaker2500</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        <div id="ui">
            <div id="score">Score: 0</div>
            <div id="highScore">High: 0</div>
            <div id="level">Level: 1</div>
            <div id="lives">Lives: 3</div>
        </div>
        <div id="powerup-display"></div>
        <div id="menu" class="screen">
            <h1>🧱 BrickBreaker2500 🧱</h1>
            <p class="subtitle">Break all the bricks!</p>
            <button id="startBtn" class="btn-primary">Start Game</button>
            <button id="scoresBtn" class="btn-secondary">High Scores</button>
            <div class="controls-info">
                <h3>Controls</h3>
                <p>  Arrow Keys or Tap Left/Right</p>
                <p>Space or Tap to Launch Ball</p>
            </div>
        </div>
        <div id="paused" class="screen hidden">
            <h2> Paused</h2>
            <button id="resumeBtn" class="btn-primary">Resume</button>
            <button id="quitBtn" class="btn-secondary">Quit to Menu</button>
        </div>
        <div id="levelComplete" class="screen hidden">
            <h2> Level Complete! </h2>
            <p id="levelScore">Score: 0</p>
            <p id="levelBonus">Bonus: 0</p>
            <button id="nextLevelBtn" class="btn-primary">Next Level</button>
        </div>
        <div id="gameOver" class="screen hidden">
            <h2> Game Over </h2>
            <p id="finalScore">Score: 0</p>
            <p id="finalLevel">Level Reached: 1</p>
            <div id="newHighScore" class="hidden">
                <h3> New High Score! </h3>
                <p id="highScoreRank" class="rank-text">You ranked #1!</p>
                <div class="high-score-input-row">
                    <input type="text" id="nameInput" maxlength="8" placeholder="Nickname">
                    <button id="submitScore" class="btn-primary" disabled>Submit</button>
                </div>
            </div>
            <button id="playAgain" class="btn-primary">Play Again</button>
            <button id="leaderboardBtn" class="btn-secondary">Leaderboards</button>
            <button id="mainMenu" class="btn-secondary">Main Menu</button>
        </div>
        <div id="highScores" class="screen hidden">
            <h2> Top 100 High Scores </h2>
            <div id="scoresList"></div>
            <button id="backBtn" class="btn-secondary">Back</button>
        </div>
    </div>
    
    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB1UhH82_J-EQZ6l_szcNqYyNbb8x_RKN8",
            authDomain: "brickbreaker2500-leaderboard.firebaseapp.com",
            projectId: "brickbreaker2500-leaderboard",
            storageBucket: "brickbreaker2500-leaderboard.firebasestorage.app",
            messagingSenderId: "318999129640",
            appId: "1:318999129640:web:7090aa0b2801133fc70f1d"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // Make Firebase available globally
        window.firebaseApp = app;
        window.firebaseDb = db;
    </script>
    
    <!-- Load scripts in order -->
    <script src="js/firebase.js"></script>
    <script src="js/utils/Vector2.js"></script>
    <script src="js/utils/ObjectPool.js"></script>
    <script src="js/entities/Ball.js"></script>
    <script src="js/entities/Paddle.js"></script>
    <script src="js/entities/Brick.js"></script>
    <script src="js/systems/LevelManager.js"></script>
    <script src="js/systems/PowerUpManager.js"></script>
    <script src="js/systems/ScoreManager.js"></script>
    <script src="js/highscores.js"></script>
    <script src="js/physics.js"></script>
    <script src="js/input.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/game.js"></script>
</body>
</html>
